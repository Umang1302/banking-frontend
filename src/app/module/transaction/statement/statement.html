<div class="statement-tab">
  <div class="statement-header">
    <h3>📄 Generate Bank Statement</h3>
    <p>Download transaction statements for any date range</p>
  </div>
  
  <form (ngSubmit)="handleGenerateStatement()" #statementForm="ngForm">
    <!-- Account Selection -->
    <div class="form-group">
      <label>Select Account <span class="required">*</span></label>
      <select 
        [(ngModel)]="formData.accountNumber"
        name="accountNumber"
        class="form-control"
        required
      >
        <option value="" disabled>Select an account</option>
        <option *ngFor="let account of userAccounts" [value]="account.accountNumber">
          {{ account.accountNumber }} - {{ getAccountTypeDisplay(account.accountType) }} 
          ({{ account.currency }} {{ account.availableBalance }})
        </option>
      </select>
      <p class="account-hint" *ngIf="userAccounts.length > 1">
        You have {{ userAccounts.length }} accounts. Select one to generate statement.
      </p>
    </div>

    <!-- Quick Date Range Buttons -->
    <div class="form-group">
      <label>Quick Date Selection:</label>
      <div class="quick-date-buttons">
        <button type="button" (click)="setQuickDateRange('thisMonth')" class="btn btn-outline">
          This Month
        </button>
        <button type="button" (click)="setQuickDateRange('lastMonth')" class="btn btn-outline">
          Last Month
        </button>
        <button type="button" (click)="setQuickDateRange('last3Months')" class="btn btn-outline">
          Last 3 Months
        </button>
        <button type="button" (click)="setQuickDateRange('thisYear')" class="btn btn-outline">
          This Year
        </button>
      </div>
    </div>

    <!-- Date Range -->
    <div class="form-row">
      <div class="form-group">
        <label>Start Date <span class="required">*</span></label>
        <input 
          type="date"
          [(ngModel)]="formData.startDate"
          name="startDate"
          class="form-control"
          required
        />
      </div>

      <div class="form-group">
        <label>End Date <span class="required">*</span></label>
        <input 
          type="date"
          [(ngModel)]="formData.endDate"
          name="endDate"
          class="form-control"
          required
        />
      </div>
    </div>

    <!-- Email Options -->
    <div class="form-group">
      <label class="checkbox-label">
        <input 
          type="checkbox"
          [(ngModel)]="formData.sendEmail"
          name="sendEmail"
        />
        <span>Email statement to me</span>
      </label>
    </div>

    <div class="form-group" *ngIf="formData.sendEmail">
      <label>Email Address <span class="required">*</span></label>
      <input 
        type="email"
        [(ngModel)]="formData.emailAddress"
        name="emailAddress"
        class="form-control"
        placeholder="your.email@example.com"
        [required]="formData.sendEmail"
      />
    </div>

    <!-- Generate Button -->
    <div class="form-actions">
      <button 
        type="submit" 
        class="btn btn-primary"
        [disabled]="generating || !statementForm.valid"
      >
        {{ generating ? '⏳ Generating...' : '📄 Generate Statement' }}
      </button>
    </div>
  </form>

  <!-- Success Message -->
  <div *ngIf="successMessage" class="alert alert-success">
    <strong>✅ Success!</strong> {{ successMessage }}
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="alert alert-error">
    <strong>❌ Error!</strong> {{ errorMessage }}
  </div>

  <!-- Info Box -->
  <div class="info-box">
    <h4>ℹ️ About Bank Statements:</h4>
    <ul>
      <li>Statements include all transactions within the selected date range</li>
      <li>PDF format includes account summary and detailed transaction list</li>
      <li>Statement will be downloaded automatically to your device</li>
      <li>If email is selected, a copy will also be sent to your email address</li>
      <li>Statements are generated in real-time and may take a few seconds</li>
    </ul>
  </div>
</div>

